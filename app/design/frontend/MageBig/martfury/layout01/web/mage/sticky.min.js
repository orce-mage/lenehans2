define(["jquery","jquery-ui-modules/widget"],function(n){"use strict";return n.widget("mage.sticky",{options:{container:"",spacingTop:0,stickAfter:0,stickyClass:"_sticky"},_getOptionValue:function(t){var e=this.options[t]||0;return"function"==typeof e&&(e=this.options[t]()),e},_create:function(){n(window).on({scroll:n.proxy(this._stick,this),resize:n.proxy(this.reset,this)}),this.element.on("dimensionsChanged",n.proxy(this.reset,this)),this.reset()},_stick:function(){var t,e,s;"static"===this.element.css("position")||!this.element.is(":visible")||(t=n(document).scrollTop()-this.parentOffset+this._getOptionValue("spacingTop"),t=Math.max(0,Math.min(t,this.maxOffset)),e=this.element.hasClass(this.options.stickyClass),s=this._getOptionValue("stickAfter"),t&&!e&&t<s&&(t=0),this.element.outerHeight()>window.innerHeight&&(t=0),this.element.toggleClass(this.options.stickyClass,0<t),0<t&&t<this.maxOffset?this.element.css({position:"fixed",left:this.postX,top:this.postT,width:this.widthE,transform:"translate3d(0, 0, 0)"}):t==this.maxOffset?this.element.css({position:"relative",left:"",top:"",width:"",transform:"translate3d(0, "+t+"px, 0)"}):this.element.attr("style",""))},_calculateDimens:function(){var t=this.element.parent(),e=t.innerHeight(),s=this.element.outerHeight(),i=document.body.offsetHeight-window.innerHeight;return 0<this.options.container.length&&(i=n(this.options.container).innerHeight()),this.parentOffset=t.offset().top,this.maxOffset=i-this.parentOffset,this.maxOffset+s>=e&&(this.maxOffset=e-s),this},reset:function(){this.widthE=this.element.innerWidth()+"px",this.postX=this.element.offset().left+"px",this.postT=this.options.spacingTop+"px",this._calculateDimens()._stick()}}),n.mage.sticky});