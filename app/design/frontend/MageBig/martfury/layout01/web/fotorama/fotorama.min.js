/*!
 * Fotorama 4.6.4 | http://fotorama.io/license/
 */
fotoramaVersion="4.6.4",function(window,document,location,$,undefined){"use strict";var wrapClass="fotorama__wrap",stageFrameClass="fotorama__stage__frame",arrClass="fotorama__arr",navClass="fotorama__nav",navShaftVerticalClass="fotorama__nav-wrap--vertical",navShaftListClass="fotorama__nav-wrap--list",shadowsClass="fotorama__shadows",imgClass="fotorama__img",JQUERY_VERSION=$&&$.fn.jquery.split(".");if(!JQUERY_VERSION||JQUERY_VERSION[0]<1||1==JQUERY_VERSION[0]&&JQUERY_VERSION[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var fullScreenApi={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if(void 0!==document.cancelFullScreen)fullScreenApi.ok=!0;else for(var i=0,il=browserPrefixes.length;i<il;i++)if(fullScreenApi.prefix=browserPrefixes[i],void 0!==document[fullScreenApi.prefix+"CancelFullScreen"]){fullScreenApi.ok=!0;break}fullScreenApi.ok&&(fullScreenApi.event=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.is=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.request=function(el){return""===this.prefix?el.requestFullScreen():el[this.prefix+"RequestFullScreen"]()},fullScreenApi.cancel=function(el){return!!this.is()&&(""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]())});var $HTML,$BODY,a,b,$WINDOW=$(window),$DOCUMENT=$(document),TEST_EL=document.createElement("div"),QUIRKS_FORCE="quirks"===location.hash.replace("#",""),TRANSFORMS3D="p"+(b="erspective")in(a=TEST_EL.style)||"WebkitP"+b in a||"MozP"+b in a||"OP"+b in a||"msP"+b in a,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,FULLSCREEN=(TRANSFORMS3D||document.compatMode,fullScreenApi.ok),MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,MS_POINTER=navigator.msPointerEnabled,WHEEL="onwheel"in document.createElement("div")?"wheel":undefined!==document.onmousewheel?"mousewheel":"DOMMouseScroll",BEZIER=function(coOrdArray){var encodedFuncName="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof $.easing[encodedFuncName]){var polyBez=function(p1,p2){var A=[null,null],B=[null,null],C=[null,null],bezCoOrd=function(t,ax){return C[ax]=3*p1[ax],B[ax]=3*(p2[ax]-p1[ax])-C[ax],A[ax]=1-C[ax]-B[ax],t*(C[ax]+t*(B[ax]+t*A[ax]))},xDeriv=function(t){return C[0]+t*(2*B[0]+3*A[0]*t)};return function(t){return bezCoOrd(function(t){for(var z,x=t,i=0;++i<14&&(z=bezCoOrd(x,0)-t,!(Math.abs(z)<.001));)x-=z/xDeriv(x);return x}(t),1)}};$.easing[encodedFuncName]=function(x,t,b,c,d){return c*polyBez([coOrdArray[0],coOrdArray[1]],[coOrdArray[2],coOrdArray[3]])(t/d)+b}}return encodedFuncName}([.1,0,.25,1]),thumbsPerSlide=1,OPTIONS={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:2,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:64,thumbheight:64,thumbmargin:2,thumbborderwidth:2,allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:300,captions:!0,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!1,trackpad:!1,shuffle:!1,direction:"ltr",shadows:!0,showcaption:!0,navdir:"horizontal",navarrows:!0,navtype:"thumbs"},KEYBOARD_OPTIONS={left:!0,right:!0,down:!0,up:!0,space:!1,home:!1,end:!1};function noop(){}function minMaxLimit(value,min,max){return Math.max(isNaN(min)?-1/0:min,Math.min(isNaN(max)?1/0:max,value))}function readPosition($el,dir){return CSS3?+function(css,dir){return css.match(/ma/)&&css.match(/-?\d+(?!d)/g)[css.match(/3d/)?"vertical"===dir?13:12:"vertical"===dir?5:4]}($el.css("transform"),dir):+$el.css("vertical"===dir?"top":"left").replace("px","")}function getTranslate(pos,direction){var obj={};if(CSS3)switch(direction){case"vertical":obj.transform="translate3d(0, "+pos+"px,0)";break;case"list":break;default:obj.transform="translate3d("+pos+"px,0,0)"}else"vertical"===direction?obj.top=pos:obj.left=pos;return obj}function getDuration(time){return{"transition-duration":time+"ms"}}function unlessNaN(value,alternative){return isNaN(value)?alternative:value}function numberFromMeasure(value,measure){return unlessNaN(+String(value).replace(measure||"px",""))}function numberFromWhatever(value,whole){return unlessNaN(function(value){return/%$/.test(value)?numberFromMeasure(value,"%"):void 0}(value)/100*whole,numberFromMeasure(value))}function measureIsValid(value){return(!isNaN(numberFromMeasure(value))||!isNaN(numberFromMeasure(value,"%")))&&value}function getPosByIndex(index,side,margin,baseIndex){return(index-(baseIndex||0))*(side+(margin||0))}function bindTransitionEnd($el){var elData=$el.data();if(!elData.tEnd){$el[0];addEvent($el[0],function(){var t,transitions={transition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==TEST_EL.style[t])return transitions[t]}(),(function(e){elData.tProp&&e.propertyName.match(elData.tProp)&&elData.onEndFn()})),elData.tEnd=!0}}function stop($el,pos){var dir=$el.navdir||"horizontal";if($el.length){var elData=$el.data();CSS3?($el.css(getDuration(0)),elData.onEndFn=noop,clearTimeout(elData.tT)):$el.stop();var lockedPos=getNumber(pos,(function(){return readPosition($el,dir)}));return $el.css(getTranslate(lockedPos,dir)),lockedPos}}function getNumber(){for(var number,_i=0,_l=arguments.length;_i<_l&&"number"!=typeof(number=_i?arguments[_i]():arguments[_i]);_i++);return number}function edgeResistance(pos,edge){return Math.round(pos+(edge-pos)/1.5)}function getProtocol(){return getProtocol.p=getProtocol.p||("https:"===location.protocol?"https://":"http://"),getProtocol.p}function findVideoId(href,forceVideo){if("string"!=typeof href)return href;var id,type;if((href=function(href){var a=document.createElement("a");return a.href=href,a}(href)).host.match(/youtube\.com/)&&href.search){if(id=href.search.split("v=")[1]){var ampersandPosition=id.indexOf("&");-1!==ampersandPosition&&(id=id.substring(0,ampersandPosition)),type="youtube"}}else href.host.match(/youtube\.com|youtu\.be|youtube-nocookie.com/)?(id=href.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),type="youtube"):href.host.match(/vimeo\.com/)&&(type="vimeo",id=href.pathname.replace(/^\/(\w+\/)*/,"").replace(/\/.*/,""));return id&&type||!forceVideo||(id=href.href,type="custom"),!!id&&{id:id,type:type,s:href.search.replace(/^\?/,""),p:getProtocol()}}function updateData(data,_dataFrame,i,fotorama){for(var _i=0,_l=data.length;_i<_l;_i++){var dataFrame=data[_i];if(dataFrame.i===i&&dataFrame.thumbsReady){var clear={videoReady:!0};clear.$stageFrame=clear.$navThumbFrame=clear.$navDotFrame=!1,fotorama.splice(_i,1,$.extend({},dataFrame,clear,_dataFrame));break}}}function getDataFromHtml($el){var data=[];function getDimensions($img,$child,imgData){var separateThumbFLAG=imgData.thumb&&imgData.img!==imgData.thumb,width=numberFromMeasure(imgData.width||$img.attr("width")),height=numberFromMeasure(imgData.height||$img.attr("height"));$.extend(imgData,{width:width,height:height,thumbratio:getRatio(imgData.thumbratio||numberFromMeasure(imgData.thumbwidth||$child&&$child.attr("width")||separateThumbFLAG||width)/numberFromMeasure(imgData.thumbheight||$child&&$child.attr("height")||separateThumbFLAG||height))})}return $el.children().each((function(){var $img,imgData,checkVideo,$child,_imgHref,_imgSrc,_thumbSrc,_video,video,$this=$(this),dataFrame=optionsToLowerCase($.extend($this.data(),{id:$this.attr("id")}));if($this.is("a, img"))imgData=dataFrame,checkVideo=!0,$child=($img=$this).children("img").eq(0),_imgHref=$img.attr("href"),_imgSrc=$img.attr("src"),_thumbSrc=$child.attr("src"),_video=imgData.video,(video=!!checkVideo&&findVideoId(_imgHref,!0===_video))?_imgHref=!1:video=_video,getDimensions($img,$child,$.extend(imgData,{video:video,img:imgData.img||_imgHref||_imgSrc||_thumbSrc,thumb:imgData.thumb||_thumbSrc||_imgSrc||_imgHref}));else{if($this.is(":empty"))return;getDimensions($this,null,$.extend(dataFrame,{html:this,_html:$this.html()}))}data.push(dataFrame)})),data}function waitFor(test,fn,timeout,i){return waitFor.i||(waitFor.i=1,waitFor.ii=[!0]),i=i||waitFor.i,void 0===waitFor.ii[i]&&(waitFor.ii[i]=!0),test()?fn():waitFor.ii[i]&&setTimeout((function(){waitFor.ii[i]&&waitFor(test,fn,timeout,i)}),timeout||100),waitFor.i++}function fit($el,measuresToFit){var elData=$el.data(),measures=elData.measures;if(measures&&(!elData.l||elData.l.W!==measures.width||elData.l.H!==measures.height||elData.l.r!==measures.ratio||elData.l.w!==measuresToFit.w||elData.l.h!==measuresToFit.h)){var height=minMaxLimit(measuresToFit.h,0,measures.height),width=height*measures.ratio;UTIL.setRatio($el,width,height),elData.l={W:measures.width,H:measures.height,r:measures.ratio,w:measuresToFit.w,h:measuresToFit.h}}return!0}function findShadowEdge(pos,min,max,dir){return min!==max&&("vertical"===dir?pos<=min?"top":pos>=max?"bottom":"top bottom":pos<=min?"left":pos>=max?"right":"left right")}function smartClick($el,fn,_options){_options=_options||{},$el.each((function(){var startEvent,$this=$(this),thisData=$this.data();thisData.clickOn||(thisData.clickOn=!0,$.extend(touch($this,{onStart:function(e){startEvent=e,(_options.onStart||noop).call(this,e)},onMove:_options.onMove||noop,onTouchEnd:_options.onTouchEnd||noop,onEnd:function(result){result.moved||fn.call(this,startEvent)}}),{noMove:!0}))}))}function div(classes,child){return'<div class="'+classes+'">'+(child||"")+"</div>"}function cls(className){return"."+className}function shuffle(array){for(var l=array.length;l;){var i=Math.floor(Math.random()*l--),t=array[l];array[l]=array[i],array[i]=t}return array}function clone(array){return"[object Array]"==Object.prototype.toString.call(array)&&$.map(array,(function(frame){return $.extend({},frame)}))}function lockScroll($el,left,top){$el.scrollLeft(left||0).scrollTop(top||0)}function optionsToLowerCase(options){if(options){var opts={};return $.each(options,(function(key,value){opts[key.toLowerCase()]=value})),opts}}function getRatio(_ratio){if(_ratio){var ratio=+_ratio;return isNaN(ratio)?+(ratio=_ratio.split("/"))[0]/+ratio[1]||undefined:ratio}}function addEvent(el,e,fn,bool){e&&(el.addEventListener?el.addEventListener(e,fn,!!bool):el.attachEvent("on"+e,fn))}function validateRestrictions(position,restriction){return position>restriction.max?position=restriction.max:position<restriction.min&&(position=restriction.min),position}function disableAttr(FLAG,disable){return disable?{disabled:FLAG}:{tabindex:-1*FLAG+"",disabled:FLAG}}function addEnterUp(el,fn){addEvent(el,"keyup",(function(e){(function(el){return!!el.getAttribute("disabled")})(el)||13==e.keyCode&&fn.call(el,e)}))}function addFocus(el,fn){addEvent(el,"focus",el.onfocusin=function(e){fn.call(el,e)},!0)}function stopEvent(e,stopPropagation){e.preventDefault?e.preventDefault():e.returnValue=!1,stopPropagation&&e.stopPropagation&&e.stopPropagation()}function getDirectionSign(forward){return forward?">":"<"}waitFor.stop=function(i){waitFor.ii[i]=!1};var lastEvent,moveEventType,preventEvent,preventEventTimeout,dragDomEl,UTIL=(jQuery,{setRatio:function($el,wh,ht){wh/ht<=1?($el.parent().removeClass("fotorama_horizontal_ratio"),$el.parent().addClass("fotorama_vertical_ratio")):($el.parent().removeClass("fotorama_vertical_ratio"),$el.parent().addClass("fotorama_horizontal_ratio"))},setThumbAttr:function($frame,value,searchAttr){var attr=searchAttr;$frame.attr(attr)||void 0===$frame.attr(attr)||$frame.attr(attr,value),$frame.find("["+attr+"]").length&&$frame.find("["+attr+"]").each((function(){$(this).attr(attr,value)}))},isExpectedCaption:function(frameItem,isExpected,undefined){var frameExpected,expected=!1;return frameExpected=frameItem.showCaption===undefined||!0===frameItem.showCaption,!!isExpected&&(frameItem.caption&&frameExpected&&(expected=!0),expected)}});function slide($el,options){var elData=$el.data(),elPos=Math.round(options.pos),onEndFn=function(){elData&&elData.sliding&&(elData.sliding=!1),(options.onEnd||noop)()};void 0!==options.overPos&&options.overPos!==options.pos&&(elPos=options.overPos);var translate=$.extend(getTranslate(elPos,options.direction),options.width&&{width:options.width},options.height&&{height:options.height});elData&&elData.sliding&&(elData.sliding=!0),CSS3?($el.css($.extend(getDuration(options.time),translate)),options.time>10?function($el,property,fn,time){var ok,elData=$el.data();elData&&(elData.onEndFn=function(){ok||(ok=!0,clearTimeout(elData.tT),fn())},elData.tProp=property,clearTimeout(elData.tT),elData.tT=setTimeout((function(){elData.onEndFn()}),1.5*time),bindTransitionEnd($el))}($el,"transform",onEndFn,options.time):onEndFn()):$el.stop().animate(translate,options.time,BEZIER,onEndFn)}function fade($el1,$el2,$frames,options,fadeStack,chain){var chainedFLAG=void 0!==chain;if(chainedFLAG||(fadeStack.push(arguments),Array.prototype.push.call(arguments,fadeStack.length),!(fadeStack.length>1))){$el1=$el1||$($el1),$el2=$el2||$($el2);var _$el1=$el1[0],_$el2=$el2[0],crossfadeFLAG="crossfade"===options.method,onEndFn=function(){if(!onEndFn.done){onEndFn.done=!0;var args=(chainedFLAG||fadeStack.shift())&&fadeStack.shift();args&&fade.apply(this,args),(options.onEnd||noop)(!!args)}},time=options.time/(chain||1);$frames.removeClass("fotorama__fade-rear fotorama__fade-front"),$el1.stop().addClass("fotorama__fade-rear"),$el2.stop().addClass("fotorama__fade-front"),crossfadeFLAG&&_$el2&&$el1.fadeTo(0,0),$el1.fadeTo(crossfadeFLAG?time:0,1,crossfadeFLAG&&onEndFn),$el2.fadeTo(time,0,onEndFn),_$el1&&crossfadeFLAG||_$el2||onEndFn()}}function extendEvent(e){var touch=(e.touches||[])[0]||e;e._x=touch.pageX||touch.originalEvent.pageX,e._y=touch.clientY||touch.originalEvent.clientY,e._now=$.now()}function touch($el,options){var touchEnabledFLAG,startEvent,$target,controlTouch,touchFLAG,targetIsSelectFLAG,targetIsLinkFlag,isDisabledSwipe,tolerance,moved,el=$el[0],tail={};function onStart(e){if($target=$(e.target),tail.checked=targetIsSelectFLAG=targetIsLinkFlag=isDisabledSwipe=moved=!1,touchEnabledFLAG||tail.flow||e.touches&&e.touches.length>1||e.which>1||lastEvent&&lastEvent.type!==e.type&&preventEvent||(targetIsSelectFLAG=options.select&&$target.is(options.select,el)))return targetIsSelectFLAG;touchFLAG="touchstart"===e.type,targetIsLinkFlag=$target.is("a, a *",el),isDisabledSwipe=$target.hasClass("disableSwipe"),controlTouch=tail.control,tolerance=tail.noMove||tail.noSwipe||controlTouch?16:tail.snap?0:4,extendEvent(e),startEvent=lastEvent=e,moveEventType=e.type.replace(/down|start/,"move").replace(/Down/,"Move"),(options.onStart||noop).call(el,e,{control:controlTouch,$target:$target}),touchEnabledFLAG=tail.flow=!0,isDisabledSwipe||touchFLAG&&!tail.go||stopEvent(e)}function onMove(e){if(e.touches&&e.touches.length>1||MS_POINTER&&!e.isPrimary||moveEventType!==e.type||!touchEnabledFLAG)return touchEnabledFLAG&&onEnd(),void(options.onTouchEnd||noop)();if(!(isDisabledSwipe=$(e.target).hasClass("disableSwipe"))){extendEvent(e);var xDiff=Math.abs(e._x-startEvent._x),yDiff=Math.abs(e._y-startEvent._y),xyDiff=xDiff-yDiff,xWin=(tail.go||tail.x||xyDiff>=0)&&!tail.noSwipe,yWin=xyDiff<0;touchFLAG&&!tail.checked?(touchEnabledFLAG=xWin)&&stopEvent(e):(stopEvent(e),movedEnough(xDiff,yDiff)&&(options.onMove||noop).call(el,e,{touch:touchFLAG})),!moved&&movedEnough(xDiff,yDiff)&&Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2))>tolerance&&(moved=!0),tail.checked=tail.checked||xWin||yWin}}function movedEnough(xDiff,yDiff){return xDiff>yDiff&&xDiff>1.5}function onEnd(e){(options.onTouchEnd||noop)();var _touchEnabledFLAG=touchEnabledFLAG;tail.control=touchEnabledFLAG=!1,_touchEnabledFLAG&&(tail.flow=!1),!_touchEnabledFLAG||targetIsLinkFlag&&!tail.checked||(e&&stopEvent(e),preventEvent=!0,clearTimeout(preventEventTimeout),preventEventTimeout=setTimeout((function(){preventEvent=!1}),1e3),(options.onEnd||noop).call(el,{moved:moved,$target:$target,control:controlTouch,touch:touchFLAG,startEvent:startEvent,aborted:!e||"MSPointerCancel"===e.type}))}function onOtherEnd(){tail.flow&&(tail.flow=!1)}MS_POINTER?(addEvent(el,"MSPointerDown",onStart),addEvent(document,"MSPointerMove",onMove),addEvent(document,"MSPointerCancel",onEnd),addEvent(document,"MSPointerUp",onEnd)):(addEvent(el,"touchstart",onStart),addEvent(el,"touchmove",onMove),addEvent(el,"touchend",onEnd),addEvent(document,"touchstart",(function(){tail.flow||(tail.flow=!0)})),addEvent(document,"touchend",onOtherEnd),addEvent(document,"touchcancel",onOtherEnd),$WINDOW.on("scroll",onOtherEnd),$el.on("mousedown pointerdown",onStart),$DOCUMENT.on("mousemove pointermove",onMove).on("mouseup pointerup",onEnd));var isTouchEnabled="ontouchstart"in document.documentElement;return dragDomEl=isTouchEnabled?"a":"div",$el.on("click",dragDomEl,(function(e){tail.checked&&stopEvent(e)})),tail}function moveOnTouch($el,options){var startCoo,coo,startElPos,moveElPos,edge,moveTrack,startTime,endTime,min,max,snap,dir,slowFLAG,moved,tracked,el=$el[0],elData=$el.data(),tail={};function startTracking(e,noStop){tracked=!0,startCoo=coo="vertical"===dir?e._y:e._x,startTime=e._now,moveTrack=[[startTime,startCoo]],startElPos=moveElPos=tail.noMove||noStop?0:stop($el,(options.getPos||noop)()),(options.onStart||noop).call(el,e)}return tail=$.extend(touch(options.$wrap,$.extend({},options,{onStart:function(e,result){min=tail.min,max=tail.max,snap=tail.snap,dir=tail.direction||"horizontal",$el.navdir=dir,slowFLAG=e.altKey,tracked=moved=!1,result.control||elData.sliding||startTracking(e)},onMove:function(e,result){tail.noSwipe||(tracked||startTracking(e),coo="vertical"===dir?e._y:e._x,moveTrack.push([e._now,coo]),edge=findShadowEdge(moveElPos=startElPos-(startCoo-coo),min,max,dir),moveElPos<=min?moveElPos=edgeResistance(moveElPos,min):moveElPos>=max&&(moveElPos=edgeResistance(moveElPos,max)),tail.noMove||($el.css(getTranslate(moveElPos,dir)),moved||(moved=!0,result.touch||MS_POINTER||$el.addClass("fotorama__grabbing")),(options.onMove||noop).call(el,e,{pos:moveElPos,edge:edge})))},onEnd:function(result){if(!tail.noSwipe||!result.moved){tracked||startTracking(result.startEvent,!0),result.touch||MS_POINTER||$el.removeClass("fotorama__grabbing");for(var _backTime,_timeDiff,_timeDiffLast,backCoo,virtualPos,limitPos,newPos,overPos,speed,_backTimeIdeal=(endTime=$.now())-250,backTime=null,time=300,friction=options.friction,_i=moveTrack.length-1;_i>=0;_i--){if(_backTime=moveTrack[_i][0],_timeDiff=Math.abs(_backTime-_backTimeIdeal),null===backTime||_timeDiff<_timeDiffLast)backTime=_backTime,backCoo=moveTrack[_i][1];else if(backTime===_backTimeIdeal||_timeDiff>_timeDiffLast)break;_timeDiffLast=_timeDiff}newPos=minMaxLimit(moveElPos,min,max);var cooDiff=backCoo-coo,forwardFLAG=cooDiff>=0,timeDiff=endTime-backTime,longTouchFLAG=timeDiff>250,swipeFLAG=!longTouchFLAG&&moveElPos!==startElPos&&newPos===moveElPos;snap&&(newPos=minMaxLimit(Math[swipeFLAG?forwardFLAG?"floor":"ceil":"round"](moveElPos/snap)*snap,min,max),min=max=newPos),swipeFLAG&&(snap||newPos===moveElPos)&&(speed=-cooDiff/timeDiff,time*=minMaxLimit(Math.abs(speed),options.timeLow,options.timeHigh),virtualPos=Math.round(moveElPos+speed*time/friction),snap||(newPos=virtualPos),(!forwardFLAG&&virtualPos>max||forwardFLAG&&virtualPos<min)&&(limitPos=forwardFLAG?min:max,snap||(newPos=limitPos),overPos=minMaxLimit(newPos+.03*(overPos=virtualPos-limitPos),limitPos-50,limitPos+50),time=Math.abs((moveElPos-overPos)/(speed/friction)))),time*=slowFLAG?10:1,(options.onEnd||noop).call(el,$.extend(result,{moved:result.moved||longTouchFLAG&&snap,pos:moveElPos,newPos:newPos,overPos:overPos,time:time,dir:dir}))}}})),tail)}function wheel($el,options){var lockFLAG,lastDirection,lastNow,el=$el[0],tail={prevent:{}};return addEvent(el,WHEEL,(function(e){var yDelta=e.wheelDeltaY||-1*e.deltaY||0,xDelta=e.wheelDeltaX||-1*e.deltaX||0,xWin=Math.abs(xDelta)&&!Math.abs(yDelta),direction=getDirectionSign(xDelta<0),sameDirection=lastDirection===direction,now=$.now(),tooFast=now-lastNow<250;lastDirection=direction,lastNow=now,xWin&&tail.ok&&(!tail.prevent[direction]||lockFLAG)&&(stopEvent(e,!0),lockFLAG&&sameDirection&&tooFast||(options.shift&&(lockFLAG=!0,clearTimeout(tail.t),tail.t=setTimeout((function(){lockFLAG=!1}),1400)),(options.onEnd||noop)(e,options.shift?direction:xDelta)))})),tail}function calculateIndexes(){$.each($.Fotorama.instances,(function(index,instance){instance.index=index}))}jQuery.Fotorama=function($fotorama,opts){$HTML=$("html"),$BODY=$("body");var data,size,$navFrame,$videoPlaying,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,nextAutoplayIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,measuresSetFLAG,scrollTop,scrollLeft,pausedAutoplayFLAG,stoppedAutoplayFLAG,measuresStash,touchedFLAG,hoverFLAG,navFrameKey,that=this,stamp=$.now(),stampClass="fotorama"+stamp,fotorama=$fotorama[0],dataFrameCount=1,fotoramaData=$fotorama.data(),$anchor=$(div("fotorama--hidden")),$wrap=$fotorama.find(cls(wrapClass)),$stage=$wrap.find(cls("fotorama__stage")),$stageShaft=($stage[0],$fotorama.find(cls("fotorama__stage__shaft"))),$stageFrame=$(),$arrPrev=$fotorama.find(cls("fotorama__arr--prev")),$arrNext=$fotorama.find(cls("fotorama__arr--next")),$arrs=$fotorama.find(cls(arrClass)),$navWrap=$fotorama.find(cls("fotorama__nav-wrap")),$nav=$navWrap.find(cls(navClass)),$navShaft=$nav.find(cls("fotorama__nav__shaft")),$navDotFrame=$(),$navThumbFrame=$(),$thumbBorder=($stageShaft.data(),$navShaft.data(),$fotorama.find(cls("fotorama__thumb-border"))),$thumbArrLeft=$fotorama.find(cls("fotorama__thumb__arr--left")),$thumbArrRight=$fotorama.find(cls("fotorama__thumb__arr--right")),$fullscreenIcon=$fotorama.find(cls("fotorama__fullscreen-icon")),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div("fotorama__video-play")),videoClose=$fotorama.find(cls("fotorama__video-close"))[0],$spinner=$fotorama.find(cls("fotorama__spinner")),activeIndex=!1,measures={},stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},toDeactivate={},toDetach={},stageLeft=0,fadeStack=[];if($wrap.$stageFrame=$('<div class="'+stageFrameClass+'"></div>'),$wrap.$navThumbFrame=$($.Fotorama.jst.thumb()),$wrap.$navDotFrame=$($.Fotorama.jst.dots()),toDeactivate.$stageFrame=[],toDeactivate.$navThumbFrame=[],toDeactivate.$navDotFrame=[],toDetach.$stageFrame={},$wrap.addClass(CSS3?"fotorama__wrap--css3":"fotorama__wrap--css2"),fotoramaData.fotorama=this,opts.autoplay){var fotoramaA=fotoramaData.fotorama;$stage.hover((function(){fotoramaA.stopAutoplay()}))}function checkForVideo(){$.each(data,(function(i,dataFrame){if(!dataFrame.i){dataFrame.i=dataFrameCount++;var video=findVideoId(dataFrame.video,!0);if(video){var thumbs={};dataFrame.video=video,dataFrame.img||dataFrame.thumb?dataFrame.thumbsReady=!0:thumbs=function(dataFrame,data,fotorama){var img,thumb,video=dataFrame.video;return"youtube"===video.type?(img=(thumb=getProtocol()+"img.youtube.com/vi/"+video.id+"/default.jpg").replace(/\/default.jpg$/,"/hqdefault.jpg"),dataFrame.thumbsReady=!0):"vimeo"===video.type?$.getJSON(getProtocol()+"vimeo.com/api/oembed.json",{url:"//vimeo.com/"+video.id},(function(json){dataFrame.thumbsReady=!0,updateData(data,{img:json.thumbnail_url,thumb:json.thumbnail_url},dataFrame.i,fotorama)})):dataFrame.thumbsReady=!0,{img:img,thumb:thumb}}(dataFrame,data,that),updateData(data,{img:thumbs.img,thumb:thumbs.thumb},dataFrame.i,that)}}}))}function allowKey(key){return o_keyboard[key]}function setStagePosition(){if(undefined!==$stage)if("vertical"==opts.navdir&&size>1){var padding=opts.thumbwidth+opts.thumbmargin;$stage.css("left",padding),$wrap.find(".fotorama__nav__frame").css({marginBottom:opts.thumbmargin+"px",marginRight:opts.thumbmargin+"px",height:opts.thumbheight+"px"}),$nav.css("marginTop","")}else $stage.css("left",""),$wrap.find(".fotorama__nav__frame").css({marginBottom:"",marginRight:opts.thumbmargin+"px",height:opts.thumbheight+"px"}),$nav.css("marginTop",opts.thumbmargin+"px")}function appendElements(FLAG){var instance;FLAG!==appendElements.f&&(FLAG?($fotorama.addClass("fotorama "+stampClass).before($anchor),instance=that,$.Fotorama.instances.push(instance),calculateIndexes()):($anchor.detach(),$fotorama.html(fotoramaData.urtext).removeClass(stampClass),function(instance){$.Fotorama.instances.splice(instance.index,1),calculateIndexes()}(that)),function(FLAG){var showParams,localStamp="fotorama"+stamp,keydownLocal="keydown."+localStamp,keyupLocal="keyup."+localStamp,resizeLocal="resize."+localStamp+" orientationchange."+localStamp;FLAG?($DOCUMENT.on(keydownLocal,(function(e){var catched,index;$videoPlaying&&27===e.keyCode?(catched=!0,unloadVideo($videoPlaying,!0,!0)):(that.fullScreen||opts.keyboard&&!that.index)&&(27===e.keyCode?(catched=!0,that.cancelFullScreen()):e.shiftKey&&32===e.keyCode&&allowKey("space")||!e.altKey&&!e.metaKey&&37===e.keyCode&&allowKey("left")||38===e.keyCode&&allowKey("up")&&$(":focus").attr("data-gallery-role")?(that.longPress.progress(),index="<"):32===e.keyCode&&allowKey("space")||!e.altKey&&!e.metaKey&&39===e.keyCode&&allowKey("right")||40===e.keyCode&&allowKey("down")&&$(":focus").attr("data-gallery-role")?(that.longPress.progress(),index=">"):36===e.keyCode&&allowKey("home")?(that.longPress.progress(),index="<<"):35===e.keyCode&&allowKey("end")&&(that.longPress.progress(),index=">>")),(catched||index)&&stopEvent(e),showParams={index:index,slow:e.altKey,user:!0},index&&(that.longPress.inProgress?that.showWhileLongPress(showParams):that.show(showParams))})),FLAG&&$DOCUMENT.on(keyupLocal,(function(e){that.longPress.inProgress&&that.showEndLongPress({user:!0}),that.longPress.reset()})),that.index||$DOCUMENT.off("keydown.fotorama").on("keydown.fotorama","textarea, input, select",(function(e){!$BODY.hasClass("fotorama__fullscreen")&&e.stopPropagation()})),$WINDOW.on(resizeLocal,that.resize)):($DOCUMENT.off(keydownLocal),$WINDOW.off(resizeLocal))}(FLAG),appendElements.f=FLAG)}function stageNoMove(){var _noMove=size<2||$videoPlaying;stageShaftTouchTail.noMove=_noMove||o_fade,stageShaftTouchTail.noSwipe=_noMove||!opts.swipe,!o_transition&&$stageShaft.toggleClass("fotorama__grab",!opts.click&&!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe),MS_POINTER&&$wrap.toggleClass("fotorama__wrap--pan-y",!stageShaftTouchTail.noSwipe)}function setAutoplayInterval(interval){!0===interval&&(interval=""),opts.autoplay=Math.max(+interval||5e3,5*o_transitionDuration)}function getThumbsInSlide($el,opts){return Math.floor($wrap.width()/(opts.thumbwidth+opts.thumbmargin))}function setOptions(){var opt;opts.nav&&"dots"!==opts.nav||(opts.navdir="horizontal"),that.options=opts=optionsToLowerCase(opts),thumbsPerSlide=getThumbsInSlide(0,opts),o_fade="crossfade"===opts.transition||"dissolve"===opts.transition,o_loop=opts.loop&&(size>2||o_fade&&(!o_transition||"slide"!==o_transition)),o_transitionDuration=+opts.transitionduration||300,o_rtl="rtl"===opts.direction,"vertical"===opts.navdir&&(o_rtl=!1),o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard),(opt=opts).navarrows&&"thumbs"===opt.nav?($thumbArrLeft.show(),$thumbArrRight.show()):($thumbArrLeft.hide(),$thumbArrRight.hide());var $el,eventType,classes={add:[],remove:[]};function addOrRemoveClass(FLAG,value){classes[FLAG?"add":"remove"].push(value)}size>1?(o_nav=opts.nav,o_navTop="top"===opts.navposition,classes.remove.push("fotorama__select"),$arrs.toggle(!!opts.arrows)):(o_nav=!1,$arrs.hide()),arrsUpdate(),stageWheelUpdate(),thumbArrUpdate(),opts.autoplay&&setAutoplayInterval(opts.autoplay),o_thumbSide=numberFromMeasure(opts.thumbwidth)||64,o_thumbSide2=numberFromMeasure(opts.thumbheight)||64,stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW,stageNoMove(),extendMeasures(opts,[measures]),o_navThumbs="thumbs"===o_nav,$navWrap.filter(":hidden")&&o_nav&&$navWrap.show(),o_navThumbs?(frameDraw(size,"navThumb"),$navFrame=$navThumbFrame,navFrameKey="$navThumbFrame",$nav.addClass("fotorama__nav--thumbs").removeClass("fotorama__nav--dots")):"dots"===o_nav?(frameDraw(size,"navDot"),$navFrame=$navDotFrame,navFrameKey="$navDotFrame",$nav.addClass("fotorama__nav--dots").removeClass("fotorama__nav--thumbs")):($navWrap.hide(),o_nav=!1,$nav.removeClass("fotorama__nav--thumbs fotorama__nav--dots")),o_nav&&(o_navTop?$navWrap.insertBefore($stage):$navWrap.insertAfter($stage),frameAppend.nav=!1,frameAppend($navFrame,$navShaft,"nav")),(o_allowFullScreen=opts.allowfullscreen)?($fullscreenIcon.prependTo($stage),o_nativeFullScreen=FULLSCREEN&&"native"===o_allowFullScreen,$el=$fullscreenIcon,eventType="touchend",/ip(ad|hone|od)/i.test(window.navigator.userAgent)&&"touchend"===eventType&&$el.on("touchend",(function(e){$DOCUMENT.trigger("mouseup",e)})),$el.on(eventType,(function(e){return stopEvent(e,!0),!1}))):($fullscreenIcon.detach(),o_nativeFullScreen=!1),addOrRemoveClass(o_fade,"fotorama__wrap--fade"),addOrRemoveClass(!o_fade,"fotorama__wrap--slide"),addOrRemoveClass(!opts.captions,"fotorama__wrap--no-captions"),addOrRemoveClass(o_rtl,"fotorama__wrap--rtl"),addOrRemoveClass(opts.arrows,"fotorama__wrap--toggle-arrows"),addOrRemoveClass(!(o_shadows=opts.shadows&&!SLOW),"fotorama__wrap--no-shadows"),$wrap.addClass(classes.add.join(" ")).removeClass(classes.remove.join(" ")),$.extend({},opts),setStagePosition()}function normalizeIndex(index){return index<0?(size+index%size)%size:index>=size?index%size:index}function limitIndex(index){return minMaxLimit(index,0,size-1)}function edgeIndex(index){return o_loop?normalizeIndex(index):limitIndex(index)}function getPrevIndex(index){return!!(index>0||o_loop)&&index-1}function getNextIndex(index){return!!(index<size-1||o_loop)&&index+1}function eachIndex(indexes,type,fn){if("number"==typeof indexes){indexes=new Array(indexes);var rangeFLAG=!0}return $.each(indexes,(function(i,index){if(rangeFLAG&&(index=i),"number"==typeof index){var dataFrame=data[normalizeIndex(index)];if(dataFrame){var key="$"+type+"Frame",$frame=dataFrame[key];fn.call(this,i,index,dataFrame,$frame,key,$frame&&$frame.data())}}}))}function setMeasures(width,height,ratio,index){(!measuresSetFLAG||"*"===measuresSetFLAG&&index===startIndex)&&(width=measureIsValid(opts.width)||measureIsValid(width)||500,height=measureIsValid(opts.height)||measureIsValid(height)||333,that.resize({width:width,ratio:opts.ratio||ratio||width/height},0,index!==startIndex&&"*"))}function loadImg(indexes,type,specialMeasures,again){eachIndex(indexes,type,(function(i,index,dataFrame,$frame,key,frameData){if($frame){var fullFLAG=that.fullScreen&&!frameData.$full&&"stage"===type;if(!frameData.$img||again||fullFLAG){var img=new Image,$img=$(img),imgData=$img.data();frameData[fullFLAG?"$full":"$img"]=$img;var srcKey="stage"===type?fullFLAG?"full":"img":"thumb",src=dataFrame[srcKey],dummy=fullFLAG?dataFrame.img:dataFrame["stage"===type?"thumb":"img"];"navThumb"===type&&($frame=frameData.$wrap),src?($.Fotorama.cache[src]?function justWait(){"error"===$.Fotorama.cache[src]?error():"loaded"===$.Fotorama.cache[src]?setTimeout(waitAndLoad,0):setTimeout(justWait,100)}():($.Fotorama.cache[src]="*",$img.on("load",waitAndLoad).on("error",error)),frameData.state="",img.src=src,frameData.data&&(frameData.data.caption&&(img.alt=frameData.data.caption||""),frameData.data.full&&$(img).data("original",frameData.data.full),UTIL.isExpectedCaption(dataFrame,opts.showcaption)&&$(img).attr("aria-labelledby",dataFrame.labelledby))):error()}}function triggerTriggerEvent(event){var _index=normalizeIndex(index);triggerEvent(event,{index:_index,src:src,frame:data[_index]})}function error(){$img.remove(),$.Fotorama.cache[src]="error",dataFrame.html&&"stage"===type||!dummy||dummy===src?(!src||dataFrame.html||fullFLAG?"stage"===type&&($frame.trigger("f:load").removeClass("fotorama__loading fotorama__error").addClass("fotorama__loaded"),triggerTriggerEvent("load"),setMeasures()):($frame.trigger("f:error").removeClass("fotorama__loading").addClass("fotorama__error"),triggerTriggerEvent("error")),frameData.state="error",!(size>1&&data[index]===dataFrame)||dataFrame.html||dataFrame.deleted||dataFrame.video||fullFLAG||(dataFrame.deleted=!0,that.splice(index,1))):(dataFrame[srcKey]=src=dummy,frameData.$full=null,loadImg([index],type,specialMeasures,!0))}function waitAndLoad(){var _i=10;waitFor((function(){return!touchedFLAG||!_i--&&!SLOW}),(function(){$.Fotorama.measures[src]=imgData.measures=$.Fotorama.measures[src]||{width:img.width,height:img.height,ratio:img.width/img.height},setMeasures(imgData.measures.width,imgData.measures.height,imgData.measures.ratio,index),$img.off("load error").addClass(""+(fullFLAG?"fotorama__img--full":imgClass)).attr("aria-hidden","false").prependTo($frame),$frame.hasClass(stageFrameClass)&&!$frame.hasClass("fotorama-video-container")&&$frame.attr("href",$img.attr("src")),fit($img,($.isFunction(specialMeasures)?specialMeasures():specialMeasures)||measures),$.Fotorama.cache[src]=frameData.state="loaded",setTimeout((function(){$frame.trigger("f:load").removeClass("fotorama__loading fotorama__error").addClass("fotorama__loaded "+(fullFLAG?"fotorama__loaded--full":"fotorama__loaded--img")),"stage"===type?triggerTriggerEvent("load"):("auto"===dataFrame.thumbratio||!dataFrame.thumbratio&&"auto"===opts.thumbratio)&&(dataFrame.thumbratio=imgData.measures.ratio,reset())}),0)}))}}))}function updateFotoramaState(){var $frame=activeFrame.$stageFrame;$frame&&!$frame.data().state&&($spinner.addClass("loading-mask").html('<div class="loader"></div>'),$frame.on("f:load f:error",(function(){$frame.off("f:load f:error"),$spinner.removeClass("loading-mask")})))}function addNavFrameEvents(frame){addEnterUp(frame,onNavFrameClick),addFocus(frame,(function(){setTimeout((function(){lockScroll($nav)}),0),slideNavShaft({time:o_transitionDuration,guessIndex:$(this).data().eq,minMax:navShaftTouchTail})}))}function frameDraw(indexes,type){eachIndex(indexes,type,(function(i,index,dataFrame,$frame,key,frameData){if(!$frame){$frame=dataFrame[key]=$wrap[key].clone(),(frameData=$frame.data()).data=dataFrame;var frame=$frame[0],labelledbyValue="labelledby"+$.now();"stage"===type?(dataFrame.html&&$('<div class="fotorama__html"></div>').append(dataFrame._html?$(dataFrame.html).removeAttr("id").html(dataFrame._html):dataFrame.html).appendTo($frame),dataFrame.id&&(labelledbyValue=dataFrame.id||labelledbyValue),dataFrame.labelledby=labelledbyValue,UTIL.isExpectedCaption(dataFrame,opts.showcaption)&&$($.Fotorama.jst.frameCaption({caption:dataFrame.caption,labelledby:labelledbyValue})).appendTo($frame),dataFrame.video&&$frame.addClass("fotorama__stage__frame--video").append($videoPlay.clone()),addFocus(frame,(function(e){setTimeout((function(){lockScroll($stage)}),0),clickToShow({index:frameData.eq,user:!0},e)})),$stageFrame=$stageFrame.add($frame)):"navDot"===type?(addNavFrameEvents(frame),$navDotFrame=$navDotFrame.add($frame)):"navThumb"===type&&(addNavFrameEvents(frame),frameData.$wrap=$frame.children(":first"),$navThumbFrame=$navThumbFrame.add($frame),dataFrame.video&&frameData.$wrap.append($videoPlay.clone()))}}))}function callFit($img,measuresToFit){return $img&&$img.length&&fit($img,measuresToFit)}function stageFramePosition(indexes){eachIndex(indexes,"stage",(function(i,index,dataFrame,$frame,key,frameData){if($frame){var el,normalizedIndex=normalizeIndex(index);frameData.eq=normalizedIndex,toDetach.$stageFrame[normalizedIndex]=$frame.css($.extend({left:o_fade?0:getPosByIndex(index,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0))),el=$frame[0],$.contains(document.documentElement,el)||($frame.appendTo($stageShaft),unloadVideo(dataFrame.$video)),callFit(frameData.$img,measures),callFit(frameData.$full,measures),!$frame.hasClass(stageFrameClass)||"false"===$frame.attr("aria-hidden")&&$frame.hasClass("fotorama__active")||$frame.attr("aria-hidden","true")}}))}function thumbsDraw(pos,loadFLAG){var leftLimit,rightLimit;"thumbs"!==o_nav||isNaN(pos)||(leftLimit=-pos,rightLimit=-pos+measures.nw,"vertical"===opts.navdir&&(pos-=opts.thumbheight,rightLimit=-pos+measures.h),$navThumbFrame.each((function(){var thisData=$(this).data(),eq=thisData.eq,getSpecialMeasures=function(){return{h:o_thumbSide2,w:thisData.w}},specialMeasures=getSpecialMeasures(),exceedLimit="vertical"===opts.navdir?thisData.t>rightLimit:thisData.l>rightLimit;specialMeasures.w=thisData.w,"vertical"!==opts.navdir&&thisData.l+thisData.w<leftLimit||exceedLimit||callFit(thisData.$img,specialMeasures)||loadFLAG&&loadImg([eq],"navThumb",getSpecialMeasures)})))}function frameAppend($frames,$shaft,type){if(!frameAppend[type]){var thumbsFLAG="nav"===type&&o_navThumbs,left=0,top=0;$shaft.append($frames.filter((function(){for(var actual,$this=$(this),frameData=$this.data(),_i=0,_l=data.length;_i<_l;_i++)if(frameData.data===data[_i]){actual=!0,frameData.eq=_i;break}return actual||$this.remove()&&!1})).sort((function(a,b){return $(a).data().eq-$(b).data().eq})).each((function(){var $this=$(this),frameData=$this.data();UTIL.setThumbAttr($this,frameData.data.caption,"aria-label")})).each((function(){if(thumbsFLAG){var $this=$(this),frameData=$this.data(),thumbwidth=Math.round(o_thumbSide2*frameData.data.thumbratio)||o_thumbSide,thumbheight=Math.round(o_thumbSide/frameData.data.thumbratio)||o_thumbSide2;frameData.t=top,frameData.h=thumbheight,frameData.l=left,frameData.w=thumbwidth,$this.css({width:thumbwidth}),top+=thumbheight+opts.thumbmargin,left+=thumbwidth+opts.thumbmargin}}))),frameAppend[type]=!0}}function disableDirrection(i){return!(o_loop||activeIndex+i&&activeIndex-size+i||$videoPlaying)}function arrsUpdate(){var disablePrev=disableDirrection(0),disableNext=disableDirrection(1);$arrPrev.toggleClass("fotorama__arr--disabled",disablePrev).attr(disableAttr(disablePrev,!1)),$arrNext.toggleClass("fotorama__arr--disabled",disableNext).attr(disableAttr(disableNext,!1))}function thumbArrUpdate(){var isLeftDisable=!1,isRightDisable=!1;if("thumbs"!==opts.navtype||opts.loop||(isLeftDisable=0==activeIndex,isRightDisable=activeIndex==opts.data.length-1),"slides"===opts.navtype){var pos=readPosition($navShaft,opts.navdir);isLeftDisable=pos>=navShaftTouchTail.max,isRightDisable=pos<=navShaftTouchTail.min}$thumbArrLeft.toggleClass("fotorama__arr--disabled",isLeftDisable).attr(disableAttr(isLeftDisable,!0)),$thumbArrRight.toggleClass("fotorama__arr--disabled",isRightDisable).attr(disableAttr(isRightDisable,!0))}function stageWheelUpdate(){stageWheelTail.ok&&(stageWheelTail.prevent={"<":disableDirrection(0),">":disableDirrection(1)})}function getNavFrameBounds($navFrame){var left,top,width,height,navFrameData=$navFrame.data();o_navThumbs?(left=navFrameData.l,top=navFrameData.t,width=navFrameData.w,height=navFrameData.h):(left=$navFrame.position().left,width=$navFrame.width());var horizontalBounds={c:left+width/2,min:-left+10*opts.thumbmargin,max:-left+measures.w-width-10*opts.thumbmargin},verticalBounds={c:top+height/2,min:-top+10*opts.thumbmargin,max:-top+measures.h-height-10*opts.thumbmargin};return"vertical"===opts.navdir?verticalBounds:horizontalBounds}function slideThumbBorder(time){var navFrameData=activeFrame[navFrameKey].data();slide($thumbBorder,{time:1.2*time,pos:"vertical"===opts.navdir?navFrameData.t:navFrameData.l,width:navFrameData.w,height:navFrameData.h,direction:opts.navdir})}function slideNavShaft(options){var overflowFLAG,time,minMax,boundTop,boundLeft,l,pos,x,$guessNavFrame=data[options.guessIndex][navFrameKey],typeOfAnimation=opts.navtype;$guessNavFrame&&("thumbs"===typeOfAnimation?(overflowFLAG=navShaftTouchTail.min!==navShaftTouchTail.max,minMax=options.minMax||overflowFLAG&&getNavFrameBounds(activeFrame[navFrameKey]),boundTop=overflowFLAG&&(options.keep&&slideNavShaft.t?slideNavShaft.l:minMaxLimit((options.coo||measures.nw/2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max)),boundLeft=overflowFLAG&&(options.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((options.coo||measures.nw/2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max)),l="vertical"===opts.navdir?boundTop:boundLeft,pos=overflowFLAG&&minMaxLimit(l,navShaftTouchTail.min,navShaftTouchTail.max)||0,time=1.1*options.time,slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:function(){thumbsDraw(pos,!0),thumbArrUpdate()}}),setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir)),slideNavShaft.l=l):(x=readPosition($navShaft,opts.navdir),time=1.11*options.time,pos=function(opt,navShaftTouchTail,guessIndex,offsetNav,$guessNavFrame,$navWrap,dir){var size,wrapSize;return"horizontal"===dir?(size=opt.thumbwidth,wrapSize=$navWrap.width()):(size=opt.thumbheight,wrapSize=$navWrap.height()),validateRestrictions((size+opt.margin)*(guessIndex+1)-opt.margin>=wrapSize-offsetNav?"horizontal"===dir?-$guessNavFrame.position().left:-$guessNavFrame.position().top:(size+opt.margin)*guessIndex-opt.margin<=Math.abs(offsetNav)?"horizontal"===dir?-$guessNavFrame.position().left+wrapSize-(size+opt.margin):-$guessNavFrame.position().top+wrapSize-(size+opt.margin):offsetNav,navShaftTouchTail)||0}(opts,navShaftTouchTail,options.guessIndex,x,$guessNavFrame,$navWrap,opts.navdir),slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:function(){thumbsDraw(pos,!0),thumbArrUpdate()}}),setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir))))}function deactivateFrames(key){for(var _toDeactivate=toDeactivate[key];_toDeactivate.length;)_toDeactivate.shift().removeClass("fotorama__active").attr("data-active",!1)}function detachFrames(key){var _toDetach=toDetach[key];$.each(activeIndexes,(function(i,index){delete _toDetach[normalizeIndex(index)]})),$.each(_toDetach,(function(index,$frame){delete _toDetach[index],$frame.detach()}))}function stageShaftReposition(skipOnEnd){repositionIndex=dirtyIndex=activeIndex;var isVerticalDir,param,mainParam,$frame=activeFrame.$stageFrame;$frame&&(deactivateFrames("$stageFrame"),toDeactivate.$stageFrame.push($frame.addClass("fotorama__active").attr("data-active",!0)),$frame.hasClass(stageFrameClass)&&$frame.attr("aria-hidden","false"),skipOnEnd||that.showStage.onEnd(!0),stop($stageShaft,0),detachFrames("$stageFrame"),stageFramePosition(activeIndexes),stageShaftTouchTail.min=o_loop?-1/0:-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.max=o_loop?1/0:-getPosByIndex(0,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.snap=measures.w+opts.margin,isVerticalDir="vertical"===opts.navdir,param=isVerticalDir?$navShaft.height():$navShaft.width(),mainParam=isVerticalDir?measures.h:measures.nw,navShaftTouchTail.min=Math.min(0,mainParam-param),navShaftTouchTail.max=0,navShaftTouchTail.direction=opts.navdir,$navShaft.toggleClass("fotorama__grab",!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max)),addEnterUp($stageShaft[0],(function(){$fotorama.hasClass("fotorama--fullscreen")||(that.requestFullScreen(),$fullscreenIcon.focus())})))}function extendMeasures(options,measuresArray){options&&$.each(measuresArray,(function(i,measures){measures&&$.extend(measures,{width:options.width||measures.width,height:options.height,minwidth:options.minwidth,maxwidth:options.maxwidth,minheight:options.minheight,maxheight:options.maxheight,ratio:getRatio(options.ratio)})}))}function triggerEvent(event,extra){$fotorama.trigger("fotorama:"+event,[that,extra])}function onTouchStart(){clearTimeout(onTouchEnd.t),touchedFLAG=1,opts.stopautoplayontouch?that.stopAutoplay():pausedAutoplayFLAG=!0}function onTouchEnd(){touchedFLAG&&(opts.stopautoplayontouch||(releaseAutoplay(),changeAutoplay()),onTouchEnd.t=setTimeout((function(){touchedFLAG=0}),550))}function releaseAutoplay(){pausedAutoplayFLAG=!(!$videoPlaying&&!stoppedAutoplayFLAG)}function changeAutoplay(){if(clearTimeout(changeAutoplay.t),waitFor.stop(changeAutoplay.w),opts.autoplay&&!pausedAutoplayFLAG){that.autoplay||(that.autoplay=!0,triggerEvent("startautoplay"));var _activeIndex=activeIndex,frameData=activeFrame.$stageFrame.data();changeAutoplay.w=waitFor((function(){return frameData.state||_activeIndex!==activeIndex}),(function(){changeAutoplay.t=setTimeout((function(){if(!pausedAutoplayFLAG&&_activeIndex===activeIndex){var _nextAutoplayIndex=nextAutoplayIndex,nextFrameData=data[_nextAutoplayIndex].$stageFrame.data();changeAutoplay.w=waitFor((function(){return nextFrameData.state||_nextAutoplayIndex!==nextAutoplayIndex}),(function(){pausedAutoplayFLAG||_nextAutoplayIndex!==nextAutoplayIndex||that.show(o_loop?getDirectionSign(!o_rtl):nextAutoplayIndex)}))}}),opts.autoplay)}))}else that.autoplay&&(that.autoplay=!1,triggerEvent("stopautoplay"))}function calcActiveIndex(options){var index;return"object"!=typeof options?(index=options,options={}):index=options.index,index=">"===index?dirtyIndex+1:"<"===index?dirtyIndex-1:"<<"===index?0:">>"===index?size-1:index,index=void 0===(index=isNaN(index)?undefined:index)?activeIndex||0:index}function calcGlobalIndexes(index){that.activeIndex=activeIndex=edgeIndex(index),prevIndex=getPrevIndex(activeIndex),nextIndex=getNextIndex(activeIndex),nextAutoplayIndex=normalizeIndex(activeIndex+(o_rtl?-1:1)),activeIndexes=[activeIndex,prevIndex,nextIndex],dirtyIndex=o_loop?index:activeIndex}function calcTime(options){var diffIndex=Math.abs(lastActiveIndex-dirtyIndex),time=getNumber(options.time,(function(){return Math.min(o_transitionDuration*(1+(diffIndex-1)/12),2*o_transitionDuration)}));return options.slow&&(time*=10),time}function setShadow($el,edge){o_shadows&&($el.removeClass("fotorama__shadows--left fotorama__shadows--right"),$el.removeClass("fotorama__shadows--top fotorama__shadows--bottom"),edge&&!$videoPlaying&&$el.addClass(edge.replace(/^|\s/g," "+shadowsClass+"--")))}function unloadVideo($video,unloadActiveFLAG,releaseAutoplayFLAG){unloadActiveFLAG&&($wrap.removeClass("fotorama__wrap--video"),$videoPlaying=!1,stageNoMove()),$video&&$video!==$videoPlaying&&($video.remove(),triggerEvent("unloadvideo")),releaseAutoplayFLAG&&(releaseAutoplay(),changeAutoplay())}function toggleControlsClass(FLAG){$wrap.toggleClass("fotorama__wrap--no-controls",FLAG)}function stageCursor(e){if(!stageShaftTouchTail.flow){var x=e?e.pageX:stageCursor.x,pointerFLAG=x&&!disableDirrection(function(x){return x-stageLeft>measures.w/3}(x))&&opts.click;stageCursor.p!==pointerFLAG&&$stage.toggleClass("fotorama__pointer",pointerFLAG)&&(stageCursor.p=pointerFLAG,stageCursor.x=x)}}function clickToShow(showOptions,e){clearTimeout(clickToShow.t),opts.clicktransition&&opts.clicktransition!==opts.transition?setTimeout((function(){var _o_transition=opts.transition;that.setOptions({transition:opts.clicktransition}),o_transition=_o_transition,clickToShow.t=setTimeout((function(){that.show(showOptions)}),10)}),0):that.show(showOptions,e)}function updateTouchTails(key,value){stageShaftTouchTail[key]=navShaftTouchTail[key]=value}function onNavFrameClick(e){var index=$(this).data().eq;"thumbs"===opts.navtype?clickToShow({index:index,slow:e.altKey,user:!0,coo:e._x-$nav.offset().left}):clickToShow({index:index,slow:e.altKey,user:!0})}function onArrClick(e){clickToShow({index:$arrs.index(this)?">":"<",slow:e.altKey,user:!0})}function addFocusOnControls(el){addFocus(el,(function(){setTimeout((function(){lockScroll($stage)}),0),toggleControlsClass(!1)}))}function reset(){if(data=that.data=data||clone(opts.data)||getDataFromHtml($fotorama),size=that.size=data.length,ready.ok&&opts.shuffle&&shuffle(data),checkForVideo(),activeIndex=limitIndex(activeIndex),size&&appendElements(!0),setOptions(),!reset.i){reset.i=!0;var _startindex=opts.startindex;activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(_startindex)||0}if(size){if(changeToRtl())return;$videoPlaying&&unloadVideo($videoPlaying,!0),activeIndexes=[],detachFrames("$stageFrame"),reset.ok=!0,that.show({index:activeIndex,time:0}),that.resize()}else that.destroy()}function changeToRtl(){if(!changeToRtl.f===o_rtl)return changeToRtl.f=o_rtl,activeIndex=size-1-activeIndex,that.reverse(),!0}function ready(){ready.ok&&(ready.ok=!1,triggerEvent("ready"))}that.startAutoplay=function(interval){return that.autoplay||(pausedAutoplayFLAG=stoppedAutoplayFLAG=!1,setAutoplayInterval(interval||opts.autoplay),changeAutoplay()),this},that.stopAutoplay=function(){return that.autoplay&&(pausedAutoplayFLAG=stoppedAutoplayFLAG=!0,changeAutoplay()),this},that.showSlide=function(slideDir){var pos,currentPosition=readPosition($navShaft,opts.navdir),size="horizontal"===opts.navdir?opts.thumbwidth:opts.thumbheight;"next"===slideDir&&(pos=currentPosition-(size+opts.margin)*thumbsPerSlide-opts.margin),"prev"===slideDir&&(pos=currentPosition+(size+opts.margin)*thumbsPerSlide-opts.margin),thumbsDraw(pos=validateRestrictions(pos,navShaftTouchTail),!0),slide($navShaft,{time:550,pos:pos,direction:opts.navdir,onEnd:function(){thumbArrUpdate()}})},that.showWhileLongPress=function(options){if(!that.longPress.singlePressInProgress){calcGlobalIndexes(calcActiveIndex(options));var time=calcTime(options)/50,_activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;return that.showNav(silent,options,time),this}},that.showEndLongPress=function(options){if(!that.longPress.singlePressInProgress){calcGlobalIndexes(calcActiveIndex(options));var time=calcTime(options)/50,_activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;return that.showStage(silent,options,time),void 0!==lastActiveIndex&&lastActiveIndex!==activeIndex,lastActiveIndex=activeIndex,this}},that.showStage=function(silent,options,time,e){if(undefined===e||"IFRAME"!=e.target.tagName){unloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i),frameDraw(activeIndexes,"stage"),stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]),updateTouchTails("go",!0),silent||triggerEvent("show",{user:options.user,time:time}),pausedAutoplayFLAG=!0;var overPos=options.overPos,onEnd=that.showStage.onEnd=function(skipReposition){if(!onEnd.ok){if(onEnd.ok=!0,skipReposition||stageShaftReposition(!0),silent||triggerEvent("showend",{user:options.user}),!skipReposition&&o_transition&&o_transition!==opts.transition)return that.setOptions({transition:o_transition}),void(o_transition=!1);updateFotoramaState(),loadImg(activeIndexes,"stage"),updateTouchTails("go",!1),stageWheelUpdate(),stageCursor(),releaseAutoplay(),changeAutoplay(),that.fullScreen?(activeFrame.$stageFrame.find(".fotorama__img--full").attr("aria-hidden",!1),activeFrame.$stageFrame.find("."+imgClass).attr("aria-hidden",!0)):(activeFrame.$stageFrame.find(".fotorama__img--full").attr("aria-hidden",!0),activeFrame.$stageFrame.find("."+imgClass).attr("aria-hidden",!1))}};if(o_fade)fade(activeFrame.$stageFrame,data[lastActiveIndex]&&activeIndex!==lastActiveIndex?data[lastActiveIndex].$stageFrame:null,$stageFrame,{time:time,method:opts.transition,onEnd:onEnd},fadeStack);else slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:overPos,time:time,onEnd:onEnd});arrsUpdate()}},that.showNav=function(silent,options,time){if(thumbArrUpdate(),o_nav){deactivateFrames(navFrameKey),toDeactivate[navFrameKey].push(activeFrame[navFrameKey].addClass("fotorama__active").attr("data-active",!0));var guessIndex=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:time,coo:guessIndex!==activeIndex&&options.coo,guessIndex:void 0!==options.coo?guessIndex:activeIndex,keep:silent}),o_navThumbs&&slideThumbBorder(time)}},that.show=function(options,e){that.longPress.singlePressInProgress=!0,calcGlobalIndexes(calcActiveIndex(options));var time=calcTime(options),_activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;return that.showStage(silent,options,time,e),that.showNav(silent,options,time),void 0!==lastActiveIndex&&lastActiveIndex!==activeIndex,lastActiveIndex=activeIndex,that.longPress.singlePressInProgress=!1,this},that.requestFullScreen=function(){if(o_allowFullScreen&&!that.fullScreen){if($((that.activeFrame||{}).$stageFrame||{}).hasClass("fotorama-video-container"))return;scrollTop=$WINDOW.scrollTop(),scrollLeft=$WINDOW.scrollLeft(),lockScroll($WINDOW),updateTouchTails("x",!0),measuresStash=$.extend({},measures),$fotorama.addClass("fotorama--fullscreen").appendTo($BODY.addClass("fotorama__fullscreen")),$HTML.addClass("fotorama__fullscreen"),unloadVideo($videoPlaying,!0,!0),that.fullScreen=!0,o_nativeFullScreen&&fullScreenApi.request(fotorama),that.resize(),loadImg(activeIndexes,"stage"),updateFotoramaState(),triggerEvent("fullscreenenter"),"ontouchstart"in window||$fullscreenIcon.focus()}return this},that.cancelFullScreen=function(){return o_nativeFullScreen&&fullScreenApi.is()?fullScreenApi.cancel(document):that.fullScreen&&(that.fullScreen=!1,FULLSCREEN&&fullScreenApi.cancel(fotorama),$BODY.removeClass("fotorama__fullscreen"),$HTML.removeClass("fotorama__fullscreen"),$fotorama.removeClass("fotorama--fullscreen").insertAfter($anchor),measures=$.extend({},measuresStash),unloadVideo($videoPlaying,!0,!0),updateTouchTails("x",!1),that.resize(),loadImg(activeIndexes,"stage"),lockScroll($WINDOW,scrollLeft,scrollTop),triggerEvent("fullscreenexit")),this},that.toggleFullScreen=function(){return that[(that.fullScreen?"cancel":"request")+"FullScreen"]()},that.resize=function(options){if(!data)return this;var time=arguments[1]||0,setFLAG=arguments[2];thumbsPerSlide=getThumbsInSlide(0,opts),extendMeasures(that.fullScreen?{width:$(window).width(),maxwidth:null,minwidth:null,height:$(window).height(),maxheight:null,minheight:null}:optionsToLowerCase(options),[measures,setFLAG||that.fullScreen||opts]);var width=measures.width,height=measures.height,ratio=measures.ratio,windowHeight=$WINDOW.height()-(o_nav?$nav.height():0);if(measureIsValid(width)&&($wrap.css({width:""}),$wrap.css({height:""}),$stage.css({width:""}),$stage.css({height:""}),$stageShaft.css({width:""}),$stageShaft.css({height:""}),$nav.css({width:""}),$nav.css({height:""}),$wrap.css({minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||1200}),"dots"===o_nav&&$navWrap.hide(),width=measures.W=measures.w=$wrap.width(),measures.nw=o_nav&&numberFromWhatever(opts.navwidth,width)||width,$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/2}),height=(height=numberFromWhatever(height,windowHeight))||ratio&&width/ratio)){if(width=Math.round(width),height=measures.h=Math.round(minMaxLimit(height,numberFromWhatever(measures.minheight,windowHeight),numberFromWhatever(measures.maxheight,windowHeight))),"vertical"==opts.navdir&&size>1){var padding=opts.thumbwidth+opts.thumbmargin,widthP=width-padding,heghtP=widthP*height/width;width=widthP,height=measures.h=heghtP,$stageShaft.css({width:width})}if($stage.css({width:width,height:height}),"vertical"!==opts.navdir||that.fullscreen||$nav.width(opts.thumbwidth),"horizontal"!==opts.navdir||that.fullscreen||$nav.height(opts.thumbheight),"dots"===o_nav&&($nav.width(width).height("auto"),$navWrap.show()),"vertical"===opts.navdir&&that.fullScreen&&$stage.css("height",$WINDOW.height()),"horizontal"===opts.navdir&&that.fullScreen&&$stage.css("height",$WINDOW.height()-$nav.height()),o_nav){switch(opts.navdir){case"vertical":$navWrap.removeClass("fotorama__nav-wrap--horizontal"),$navWrap.removeClass(navShaftListClass),$navWrap.addClass(navShaftVerticalClass),$nav.stop().animate({height:height,width:opts.thumbwidth},time);break;case"list":$navWrap.removeClass(navShaftVerticalClass),$navWrap.removeClass("fotorama__nav-wrap--horizontal"),$navWrap.addClass(navShaftListClass);break;default:$navWrap.removeClass(navShaftVerticalClass),$navWrap.removeClass(navShaftListClass),$navWrap.addClass("fotorama__nav-wrap--horizontal"),$nav.stop().animate({width:measures.nw},time)}stageShaftReposition(),slideNavShaft({guessIndex:activeIndex,time:time,keep:!0}),o_navThumbs&&frameAppend.nav&&slideThumbBorder(time)}measuresSetFLAG=setFLAG||!0,ready.ok=!0,ready()}return stageLeft=$stage.offset().left,setStagePosition(),this},that.setOptions=function(options){return $.extend(opts,options),reset(),$("body").on("contentUpdated",(function(){reset()})),this},that.shuffle=function(){return data&&shuffle(data)&&reset(),this},that.longPress={threshold:1,count:0,thumbSlideTime:20,progress:function(){this.inProgress||(this.count++,this.inProgress=this.count>this.threshold)},end:function(){this.inProgress&&(this.isEnded=!0)},reset:function(){this.count=0,this.inProgress=!1,this.isEnded=!1}},that.destroy=function(){return that.cancelFullScreen(),that.stopAutoplay(),data=that.data=null,appendElements(),activeIndexes=[],detachFrames("$stageFrame"),reset.ok=!1,this},that.playVideo=function(){var dataFrame=activeFrame,video=dataFrame.video,_activeIndex=activeIndex;return"object"==typeof video&&dataFrame.videoReady&&(o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen(),waitFor((function(){return!fullScreenApi.is()||_activeIndex!==activeIndex}),(function(){var videoItem;_activeIndex===activeIndex&&(dataFrame.$video=dataFrame.$video||$(div("fotorama__video")).append('<iframe src="'+(videoItem=video).p+videoItem.type+".com/embed/"+videoItem.id+'" frameborder="0" allowfullscreen></iframe>'),dataFrame.$video.appendTo(dataFrame.$stageFrame),$wrap.addClass("fotorama__wrap--video"),$videoPlaying=dataFrame.$video,stageNoMove(),$arrs.blur(),$fullscreenIcon.blur(),triggerEvent("loadvideo"))}))),this},that.stopVideo=function(){return unloadVideo($videoPlaying,!0,!0),this},that.spliceByIndex=function(index,newImgObj){newImgObj.i=index+1,newImgObj.img&&$.ajax({url:newImgObj.img,type:"HEAD",success:function(){data.splice(index,1,newImgObj),reset()}})},$stage.on("mousemove",stageCursor),stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($stage,result.edge)},onTouchEnd:onTouchEnd,onEnd:function(result){var toggleControlsFLAG,e,target,pos,side,margin,baseIndex;if(setShadow($stage),toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows,(result.moved||toggleControlsFLAG&&result.pos!==result.newPos&&!result.control)&&result.$target[0]!==$fullscreenIcon[0]){var index=(pos=result.newPos,side=measures.w,margin=opts.margin,baseIndex=repositionIndex,-Math.round(pos/(side+(margin||0))-(baseIndex||0)));that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:!0})}else result.aborted||result.control||(e=result.startEvent,target=e.target,$(target).hasClass("fotorama__video-play")?that.playVideo():target===fullscreenIcon?that.toggleFullScreen():$videoPlaying?target===videoClose&&unloadVideo($videoPlaying,!0,!0):$fotorama.hasClass("fotorama--fullscreen")||that.requestFullScreen())},timeLow:1,timeHigh:1,friction:2,select:".fotorama__select, .fotorama__select *",$wrap:$stage,direction:"horizontal"}),navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($nav,result.edge)},onTouchEnd:onTouchEnd,onEnd:function(result){function onEnd(){slideNavShaft.l=result.newPos,releaseAutoplay(),changeAutoplay(),thumbsDraw(result.newPos,!0),thumbArrUpdate()}if(result.moved)result.pos!==result.newPos?(pausedAutoplayFLAG=!0,slide($navShaft,{time:result.time,pos:result.newPos,overPos:result.overPos,direction:opts.navdir,onEnd:onEnd}),thumbsDraw(result.newPos),o_shadows&&setShadow($nav,findShadowEdge(result.newPos,navShaftTouchTail.min,navShaftTouchTail.max,result.dir))):onEnd();else{var target=result.$target.closest(".fotorama__nav__frame",$navShaft)[0];target&&onNavFrameClick.call(target,result.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav,direction:opts.navdir}),stageWheelTail=wheel($stage,{shift:!0,onEnd:function(e,direction){onTouchStart(),onTouchEnd(),that.show({index:direction,slow:e.altKey})}}),navWheelTail=wheel($nav,{onEnd:function(e,direction){onTouchStart(),onTouchEnd();var newPos=stop($navShaft)+.25*direction;$navShaft.css(getTranslate(minMaxLimit(newPos,navShaftTouchTail.min,navShaftTouchTail.max),opts.navdir)),o_shadows&&setShadow($nav,findShadowEdge(newPos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir)),navWheelTail.prevent={"<":newPos>=navShaftTouchTail.max,">":newPos<=navShaftTouchTail.min},clearTimeout(navWheelTail.t),navWheelTail.t=setTimeout((function(){slideNavShaft.l=newPos,thumbsDraw(newPos,!0)}),250),thumbsDraw(newPos)}}),$wrap.hover((function(){setTimeout((function(){touchedFLAG||toggleControlsClass(!(hoverFLAG=!0))}),0)}),(function(){hoverFLAG&&toggleControlsClass(!(hoverFLAG=!1))})),smartClick($arrs,(function(e){stopEvent(e),onArrClick.call(this,e)}),{onStart:function(){onTouchStart(),stageShaftTouchTail.control=!0},onTouchEnd:onTouchEnd}),smartClick($thumbArrLeft,(function(e){stopEvent(e),"thumbs"===opts.navtype?that.show("<"):that.showSlide("prev")})),smartClick($thumbArrRight,(function(e){stopEvent(e),"thumbs"===opts.navtype?that.show(">"):that.showSlide("next")})),$arrs.each((function(){addEnterUp(this,(function(e){onArrClick.call(this,e)})),addFocusOnControls(this)})),addEnterUp(fullscreenIcon,(function(){$fotorama.hasClass("fotorama--fullscreen")?(that.cancelFullScreen(),$stageShaft.focus()):(that.requestFullScreen(),$fullscreenIcon.focus())})),addFocusOnControls(fullscreenIcon),$.each("load push pop shift unshift reverse sort splice".split(" "),(function(i,method){that[method]=function(){return data=data||[],"load"!==method?Array.prototype[method].apply(data,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(data=clone(arguments[0])),reset(),that}})),reset()},$.fn.fotorama=function(opts){return this.each((function(){var that=this,$fotorama=$(this),fotoramaData=$fotorama.data(),fotorama=fotoramaData.fotorama;fotorama?fotorama.setOptions(opts,!0):waitFor((function(){return!(0===(el=that).offsetWidth&&0===el.offsetHeight);var el}),(function(){fotoramaData.urtext=$fotorama.html(),new $.Fotorama($fotorama,$.extend({},OPTIONS,window.fotoramaDefaults,opts,fotoramaData))}))}))},$.Fotorama.instances=[],$.Fotorama.cache={},$.Fotorama.measures={},($=$||{}).Fotorama=$.Fotorama||{},$.Fotorama.jst=$.Fotorama.jst||{},$.Fotorama.jst.dots=function(v){return'<div class="fotorama__nav__frame fotorama__nav__frame--dot" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__dot"></div>\r\n</div>','<div class="fotorama__nav__frame fotorama__nav__frame--dot" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__dot"></div>\r\n</div>'},$.Fotorama.jst.frameCaption=function(v){var __t,__p="";return __p+='<div class="fotorama__caption" aria-hidden="true">\r\n    <div class="fotorama__caption__wrap" id="'+(null==(__t=v.labelledby)?"":__t)+'">'+(null==(__t=v.caption)?"":__t)+"</div>\r\n</div>\r\n"},$.Fotorama.jst.thumb=function(v){return'<div class="fotorama__nav__frame fotorama__nav__frame--thumb" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__thumb">\r\n    </div>\r\n</div>','<div class="fotorama__nav__frame fotorama__nav__frame--thumb" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__thumb">\r\n    </div>\r\n</div>'}}(window,document,location,"undefined"!=typeof jQuery&&jQuery);